module.exports.getCurrentUserID = (requestContext) => {
	if (process.env.AWS_SAM_LOCAL === "true") {
		return "02932718-b6b1-4488-a9df-aa616dcddbf3";
	}

	if (!requestContext.authorizer) {
		throw new Error("Unauthorized");
	}

	return requestContext.authorizer.claims.sub;
};

module.exports.response = (statusCode, body, headers = {}) => {
	return {
		statusCode,
		body: JSON.stringify(body),
		headers: {
			"Access-Control-Allow-Origin": "*",
			"Access-Control-Allow-Headers": "*",
			"Access-Control-Allow-Methods": "GET,POST,PUT,DELETE,OPTIONS",
			...headers,
		},
	};
}
